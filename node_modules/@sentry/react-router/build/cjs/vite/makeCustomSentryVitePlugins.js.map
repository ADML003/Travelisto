{"version":3,"file":"makeCustomSentryVitePlugins.js","sources":["../../../src/vite/makeCustomSentryVitePlugins.ts"],"sourcesContent":["import { sentryVitePlugin } from '@sentry/vite-plugin';\nimport { type Plugin } from 'vite';\nimport type { SentryReactRouterBuildOptions } from './types';\n\n/**\n * Create a custom subset of sentry's vite plugins\n */\nexport async function makeCustomSentryVitePlugins(options: SentryReactRouterBuildOptions): Promise<Plugin[]> {\n  const { debug, unstable_sentryVitePluginOptions, bundleSizeOptimizations, authToken, org, project, telemetry } =\n    options;\n\n  const sentryVitePlugins = sentryVitePlugin({\n    authToken: authToken ?? process.env.SENTRY_AUTH_TOKEN,\n    bundleSizeOptimizations,\n    debug: debug ?? false,\n    org: org ?? process.env.SENTRY_ORG,\n    project: project ?? process.env.SENTRY_PROJECT,\n    telemetry: telemetry ?? true,\n    _metaOptions: {\n      telemetry: {\n        metaFramework: 'react-router',\n      },\n    },\n    // will be handled in buildEnd hook\n    sourcemaps: {\n      disable: true,\n    },\n    ...unstable_sentryVitePluginOptions,\n  }) as Plugin[];\n\n  // only use a subset of the plugins as all upload and file deletion tasks will be handled in the buildEnd hook\n  return [\n    ...sentryVitePlugins.filter(plugin => {\n      return ['sentry-telemetry-plugin', 'sentry-vite-release-injection-plugin'].includes(plugin.name);\n    }),\n  ];\n}\n"],"names":["sentryVitePlugin"],"mappings":";;;;AAIA;AACA;AACA;AACO,eAAe,2BAA2B,CAAC,OAAO,EAAoD;AAC7G,EAAE,MAAM,EAAE,KAAK,EAAE,gCAAgC,EAAE,uBAAuB,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE,WAAY;AACjH,IAAI,OAAO;;AAEX,EAAE,MAAM,iBAAA,GAAoBA,2BAAgB,CAAC;AAC7C,IAAI,SAAS,EAAE,SAAU,IAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB;AACzD,IAAI,uBAAuB;AAC3B,IAAI,KAAK,EAAE,KAAM,IAAG,KAAK;AACzB,IAAI,GAAG,EAAE,GAAI,IAAG,OAAO,CAAC,GAAG,CAAC,UAAU;AACtC,IAAI,OAAO,EAAE,OAAQ,IAAG,OAAO,CAAC,GAAG,CAAC,cAAc;AAClD,IAAI,SAAS,EAAE,SAAU,IAAG,IAAI;AAChC,IAAI,YAAY,EAAE;AAClB,MAAM,SAAS,EAAE;AACjB,QAAQ,aAAa,EAAE,cAAc;AACrC,OAAO;AACP,KAAK;AACL;AACA,IAAI,UAAU,EAAE;AAChB,MAAM,OAAO,EAAE,IAAI;AACnB,KAAK;AACL,IAAI,GAAG,gCAAgC;AACvC,GAAG,CAAE;;AAEL;AACA,EAAE,OAAO;AACT,IAAI,GAAG,iBAAiB,CAAC,MAAM,CAAC,UAAU;AAC1C,MAAM,OAAO,CAAC,yBAAyB,EAAE,sCAAsC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;AACtG,KAAK,CAAC;AACN,GAAG;AACH;;;;"}